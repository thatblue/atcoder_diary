# グラフ・幾何学

## 二点間の距離の二乗を求める

距離に対して判定したりなどの後続処理がある場合、安易に平方根を取ると誤差でWAになったりするので二乗で比較した方がよい。

```ruby
distance_pow2 = (x1 - x2) ** 2 + (y1 - y2) ** 2
```

ちなみに、平方根はMathモジュールにあるので使うときはincludeすること。

### 度からラジアンに変換する

Mathモジュールの三角関数メソッドの引数はラジアンなので、入力が度の場合(多分だいたいそう)は変換が必要。

```ruby
include Math
angle_rad = degree * Math::PI / 180
```

### 外積の求め方
∠ABCを反時計回り方向に見た場合の外積の求め方

ABのベクトルをv1、BCのベクトルをv2とすると以下のように求められる。

```ruby
v1 = {'x' => ax - bx, 'y' => ay - by}
v2 = {'x' => cx - bx, 'y' => cy - by}
```

このとき、以下の式で外積を求められる。

```ruby
outer_product = v2['x'] * v1['y'] - v2['y'] * v1['x']
```

`outer_product`が0未満であれば∠ABCは反時計回り方向に見て180度未満であると言える。

### ユークリッド距離

いわゆる直線距離のこと。
比較が必要な場合は安易にsqrtを取ると痛い目に逢う。

```ruby
include Math
Math.sqrt((a_x - b_x) ** 2 + (a_y - b_y) ** 2)
```

### マンハッタン距離

碁盤の目状に引かれた道に沿って移動するときの最短経路のこと。

```ruby
(a_x - b_x).abs + (a_y - b_y).abs
```

### チェビシェフ距離
[こういう問題](https://atcoder.jp/contests/abc264/tasks/abc264_b)で中心点からの距離を求めたいときに使う。

```ruby
[(a_x - b_x).abs, (a_y - b_y).abs].max
```
