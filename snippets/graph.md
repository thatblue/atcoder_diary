# グラフ・幾何学

## 二点間の距離の二乗を求める

距離に対して判定したりなどの後続処理がある場合、安易に平方根を取ると誤差でWAになったりするので二乗で比較した方がよい。

```ruby
distance_pow2 = (x1 - x2) ** 2 + (y1 - y2) ** 2
```

ちなみに、平方根はMathモジュールにあるので使うときはincludeすること。

### 度からラジアンに変換する

Mathモジュールの三角関数メソッドの引数はラジアンなので、入力が度の場合(多分だいたいそう)は変換が必要。

```ruby
include Math
angle_rad = degree * Math::PI / 180
```

### 外積の求め方
∠ABCを反時計回り方向に見た場合の外積の求め方

ABのベクトルをv1、BCのベクトルをv2とすると以下のように求められる。

```ruby
v1 = {'x' => ax - bx, 'y' => ay - by}
v2 = {'x' => cx - bx, 'y' => cy - by}
```

このとき、以下の式で外積を求められる。

```ruby
outer_product = v2['x'] * v1['y'] - v2['y'] * v1['x']
```

`outer_product`が0未満であれば∠ABCは反時計回り方向に見て180度未満であると言える。